â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                           â•‘
â•‘  ğŸ¯ RESUMEN: Setup Robusto v2 para Raspberry Pi (Production-Ready)       â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ğŸ“¦ ARCHIVOS NUEVOS (MEJORADOS)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… setup_rpi_v2.sh
   â””â”€ InstalaciÃ³n profesional: pre-requisitos apt, estructura runtime, 
      servicios systemd blindados, health check integrado

âœ… dashboard_app_v2.py
   â””â”€ Dashboard ligero en gunicorn: cache 15s, /health endpoint, 
      telemetrÃ­a (CPU/RAM/temp), logging estructurado

âœ… runtime_env_template.txt
   â””â”€ ConfiguraciÃ³n centralizada: BVM_RUNTIME, TZ, timers, 
      lÃ­mites de recursos, credenciales, retenciÃ³n


ğŸ—ï¸ ARQUITECTURA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

~/bmv_hybrid_clean_v3/         (CÃ“DIGO - estÃ¡tico, versionado)
  â”œâ”€ setup_rpi_v2.sh
  â”œâ”€ scripts/
  â”œâ”€ src/
  â””â”€ models/

~/bmv_runtime/                 (DATOS - volÃ¡til, crece)
  â”œâ”€ data/raw/1d, 1h
  â”œâ”€ reports/paper_trading/
  â”œâ”€ logs/                     (max 100MB, rotados)
  â”œâ”€ state/                    (lock_daily, last_run.json)
  â””â”€ config/runtime.env        (centralizado, chmod 600)


â° AUTOMATIZACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

06:00 (Diarios)
  â†’ paper_run_daily.py
  â†’ Genera: trades.csv, signals.csv, last_run.json
  âœ“ Lock para evitar doble ejecuciÃ³n
  âœ“ Timeout 30 min para descargas

09:30-16:30 (L-V)
  â†’ monitor_forecast_live.py
  â†’ Actualiza: bitacora_intraday.csv, active_positions.json

24/7 (Continuo)
  â†’ Dashboard en port 5000
  â†’ Health check: CPU, RAM, disk, temp


ğŸ”§ BLINDAJES (Production)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Doble ejecuciÃ³n        â†’ Lock file + flock
âœ“ Tareas lentas          â†’ TimeoutStartSec=1800
âœ“ RPi apagada            â†’ Persistent=true (reejecutar al prender)
âœ“ Dashboard cae          â†’ Restart=always + RestartSec=10
âœ“ Memoria descontrolada  â†’ MemoryLimit=768M (mata proceso)
âœ“ CPU disparada          â†’ CPUQuota=80% (limita a 80%)
âœ“ Disco lleno            â†’ RetenciÃ³n 90 dÃ­as automÃ¡tica
âœ“ Logs sin control       â†’ RotaciÃ³n cada 100MB
âœ“ Temperaturas altas     â†’ Alertas si > 75Â°C
âœ“ AuditorÃ­a              â†’ last_run.json + logs detallados


ğŸš€ INSTALACIÃ“N (3 PASOS)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Desktop (Windows)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   cd bmv_hybrid_clean_v3
   bash sync_to_rpi.sh pi 192.168.1.100

2. RPi Terminal
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   ssh pi@192.168.1.100
   cd ~/bmv_hybrid_clean_v3
   bash setup_rpi_v2.sh

   (Espera ~15-20 min)

3. Validar & Activar
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   python validate_rpi_setup.py
   sudo systemctl enable bmv-dashboard.service
   sudo systemctl start bmv-dashboard.service

   ğŸ‰ Â¡LISTO!


ğŸ“Š DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Acceso: http://192.168.1.100:5000

Endpoints:
  /health               â†’ CPU, RAM, disk, temp, last_run
  /api/positions        â†’ Posiciones activas
  /api/equity           â†’ Curva de capital
  /api/trades/latest    â†’ Ãšltimos 20 trades
  /api/status           â†’ Status general


ğŸ“‹ VALIDACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

python validate_rpi_setup.py

âœ“ Python 3.10+
âœ“ Virtual environment
âœ“ Imports crÃ­ticos (pandas, flask, sklearn)
âœ“ BVM_RUNTIME existe
âœ“ Permisos R/W en logs/
âœ“ Reporte dummy generado
âœ“ Dashboard responde localmente
âœ“ Servicios systemd existen
âœ“ Systemd enabled/active
âœ“ Recursos OK (CPU temp, RAM, disk)


ğŸ“ˆ MONITOREO EN VIVO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ver logs en vivo:
  journalctl -u bmv-dashboard -f
  journalctl -u bmv-daily-tasks -f

Ver timers prÃ³ximos:
  sudo systemctl list-timers

Salud del sistema:
  curl http://localhost:5000/health | jq


ğŸ”‘ CAMBIOS CLAVE vs v1
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Paths           â†’ Relativos â†’ BVM_RUNTIME centralizado
Config          â†’ Hardcodeada â†’ runtime.env parametrizable
Logging         â†’ journalctl solo â†’ journalctl + archivos
Dashboard       â†’ Flask dev â†’ Gunicorn production
Cache           â†’ Ninguno â†’ 15 seg (menos carga)
Health          â†’ Manual â†’ /health endpoint automÃ¡tico
Locks           â†’ Ninguno â†’ state/lock_daily
Retry           â†’ Manual â†’ systemd restart automÃ¡tico
Permisos        â†’ Default â†’ chmod 600 en secrets
TelemetrÃ­a      â†’ Manual â†’ psutil integrado


âœ¨ BENEFICIOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Setup una sola vez (setup_rpi_v2.sh hace TODO)
âœ“ ConfiguraciÃ³n centralizada (runtime.env)
âœ“ AutomÃ¡tico 24/7 (systemd blindado)
âœ“ Monitoreable (dashboard + health endpoint)
âœ“ Robusto (locks, retries, lÃ­mites de recursos)
âœ“ Loggeable (todo se registra)
âœ“ Escalable (estructura separada cÃ³digo vs datos)
âœ“ Professional (production-ready)


ğŸ“ ARCHIVOS DE REFERENCIA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PRO_SETUP_GUIDE.md      â†’ Documento completo (lo mÃ¡s importante)
QUICK_START_RPI.md      â†’ GuÃ­a rÃ¡pida 3 pasos
INSTALL_RPI.md          â†’ Manual paso a paso
ARCHITECTURE.md         â†’ Flujo completo y conceptos


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                           â•‘
â•‘  ğŸ‰ Tu Raspberry Pi estarÃ¡ lista para producciÃ³n 24/7                    â•‘
â•‘                                                                           â•‘
â•‘     bash setup_rpi_v2.sh  â†’  Â¡AutomÃ¡tico y blindado!                     â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
